{
    "id": 3635457625,
    "node_id": "MDE1OlN1YnNjcmliZWRFdmVudDM2MzU0NTc2MjU=",
    "url": "https://api.github.com/repos/ethereumclassic/ECIPs/issues/events/3635457625",
    "actor": {
      "login": "gitr0n1n",
      "id": 58588775,
      "node_id": "MDQ6VXNlcjU4NTg4Nzc1",
      "avatar_url": "https://avatars2.githubusercontent.com/u/58588775?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/gitr0n1n",
      "html_url": "https://github.com/gitr0n1n",
      "followers_url": "https://api.github.com/users/gitr0n1n/followers",
      "following_url": "https://api.github.com/users/gitr0n1n/following{/other_user}",
      "gists_url": "https://api.github.com/users/gitr0n1n/gists{/gist_id}",
      "starred_url": "https://api.github.com/users/gitr0n1n/starred{/owner}{/repo}",
      "subscriptions_url": "https://api.github.com/users/gitr0n1n/subscriptions",
      "organizations_url": "https://api.github.com/users/gitr0n1n/orgs",
      "repos_url": "https://api.github.com/users/gitr0n1n/repos",
      "events_url": "https://api.github.com/users/gitr0n1n/events{/privacy}",
      "received_events_url": "https://api.github.com/users/gitr0n1n/received_events",
      "type": "User",
      "site_admin": false
    },
    "event": "subscribed",
    "commit_id": null,
    "commit_url": null,
    "created_at": "2020-08-08T07:49:27Z",
    "issue": {
      "url": "https://api.github.com/repos/ethereumclassic/ECIPs/issues/329",
      "repository_url": "https://api.github.com/repos/ethereumclassic/ECIPs",
      "labels_url": "https://api.github.com/repos/ethereumclassic/ECIPs/issues/329/labels{/name}",
      "comments_url": "https://api.github.com/repos/ethereumclassic/ECIPs/issues/329/comments",
      "events_url": "https://api.github.com/repos/ethereumclassic/ECIPs/issues/329/events",
      "html_url": "https://github.com/ethereumclassic/ECIPs/issues/329",
      "id": 675428535,
      "node_id": "MDU6SXNzdWU2NzU0Mjg1MzU=",
      "number": 329,
      "title": "ECIP-1093[Discussion]: Change the ETC Proof of Work Algorithm to RandomX",
      "user": {
        "login": "gitr0n1n",
        "id": 58588775,
        "node_id": "MDQ6VXNlcjU4NTg4Nzc1",
        "avatar_url": "https://avatars2.githubusercontent.com/u/58588775?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/gitr0n1n",
        "html_url": "https://github.com/gitr0n1n",
        "followers_url": "https://api.github.com/users/gitr0n1n/followers",
        "following_url": "https://api.github.com/users/gitr0n1n/following{/other_user}",
        "gists_url": "https://api.github.com/users/gitr0n1n/gists{/gist_id}",
        "starred_url": "https://api.github.com/users/gitr0n1n/starred{/owner}{/repo}",
        "subscriptions_url": "https://api.github.com/users/gitr0n1n/subscriptions",
        "organizations_url": "https://api.github.com/users/gitr0n1n/orgs",
        "repos_url": "https://api.github.com/users/gitr0n1n/repos",
        "events_url": "https://api.github.com/users/gitr0n1n/events{/privacy}",
        "received_events_url": "https://api.github.com/users/gitr0n1n/received_events",
        "type": "User",
        "site_admin": false
      },
      "labels": [
        {
          "id": 1154785139,
          "node_id": "MDU6TGFiZWwxMTU0Nzg1MTM5",
          "url": "https://api.github.com/repos/ethereumclassic/ECIPs/labels/status:%201%20draft",
          "name": "status: 1 draft",
          "color": "d9d9d9",
          "default": false,
          "description": "ECIP is in draft stage an can be assigned ECIP number and merged, but requires community consensus."
        },
        {
          "id": 1154785127,
          "node_id": "MDU6TGFiZWwxMTU0Nzg1MTI3",
          "url": "https://api.github.com/repos/ethereumclassic/ECIPs/labels/type:%20core",
          "name": "type: core",
          "color": "fbb4ae",
          "default": false,
          "description": "ECIPs of the type \"Core\" - changing the Classic protocol."
        }
      ],
      "state": "open",
      "locked": false,
      "assignee": null,
      "assignees": [

      ],
      "milestone": null,
      "comments": 13,
      "created_at": "2020-08-08T04:44:22Z",
      "updated_at": "2020-08-31T23:25:28Z",
      "closed_at": null,
      "author_association": "MEMBER",
      "active_lock_reason": null,
      "body": "---\r\nlang: en\r\necip: To Be Determined\r\ntitle: Change the ETC Proof of Work Algorithm to RandomX\r\nstatus: Draft\r\ntype: Standards Track\r\ncategory: Core\r\ndiscussions-to: https://github.com/ethereumclassic/ECIPs/issues/329\r\nauthor: r0n1n (gitr0n1n@protonmail.com)\r\ncreated: 2020-08-07\r\n---\r\n\r\n### Abstract\r\nA proposal to replace the current Ethereum Classic proof of work algorithm with RandomX.\r\n\r\n### Motivation\r\nEthereum Classic suffered a second round of 51% attacks due to dwindling hashrate on the Ethash algorithm.\r\n\r\n* [July 31, 2020](https://blog.bitquery.io/attacker-stole-807k-etc-in-ethereum-classic-51-attack)\r\n* [August 6, 2020](https://blog.bitquery.io/ethereum-classic-attack-8-august-catch-me-if-you-can).\r\n\r\nThis ECIP is presented to provide an ASIC-resistant option for the discussion of switching to a new algorithm.\r\n\r\nThis PR is to compliment the algorithm discussions. If we consider an algorithm change this provides an ASIC-resistant option, opposed to the SHA3 all-in ASIC option.\r\n\r\nRelated:\r\n- Do nothing. Stay on Ethash.\r\n- Fix the DAG. Stay on Ethash. https://github.com/ethereumclassic/ECIPs/issues/11\r\n- Change algorithm to ASIC-friendly SHA3. https://github.com/ethereumclassic/ECIPs/issues/13\r\n- Change algorithm to ASIC-resistant RandomX. https://github.com/ethereumclassic/ECIPs/issues/329\r\n\r\n# Specification\r\n\r\nThe proposed solution refers to [RandomX](https://web.getmonero.org/resources/moneropedia/randomx.html). This spec was sourced from the [Monero Community](https://github.com/tevador/RandomX). Thank you to all the wonderful researchers contributing to the goal of ASIC resistant algorithms.\r\n\r\n# RandomX\r\nRandomX is a proof-of-work (PoW) algorithm that is optimized for general-purpose CPUs. RandomX uses random code execution (hence the name) together with several memory-hard techniques to minimize the efficiency advantage of specialized hardware.\r\n\r\n## Overview\r\n\r\nRandomX utilizes a virtual machine that executes programs in a special instruction set that consists of integer math, floating point math and branches. These programs can be translated into the CPU's native machine code on the fly (example: [program.asm](https://github.com/tevador/RandomX/blob/master/doc/program.asm)). At the end, the outputs of the executed programs are consolidated into a 256-bit result using a cryptographic hashing function ([Blake2b](https://blake2.net/)).\r\n\r\nRandomX can operate in two main modes with different memory requirements:\r\n\r\n* **Fast mode** - requires 2080 MiB of shared memory.\r\n* **Light mode** - requires only 256 MiB of shared memory, but runs significantly slower\r\n\r\nBoth modes are interchangeable as they give the same results. The fast mode is suitable for \"mining\", while the light mode is expected to be used only for proof verification.\r\n\r\n## Documentation\r\n\r\nFull specification is available in [specs.md](https://github.com/tevador/RandomX/blob/master/doc/specs.md).\r\n\r\nDesign description and analysis is available in [design.md](https://github.com/tevador/RandomX/blob/master/doc/design.md).\r\n\r\n## Audits\r\n\r\nBetween May and August 2019, RandomX was audited by 4 independent security research teams:\r\n\r\n* [Trail of Bits](https://www.trailofbits.com/) (28 000 USD)\r\n* [X41 D-SEC](https://www.x41-dsec.de/) (42 000 EUR)\r\n* [Kudelski Security](https://www.kudelskisecurity.com/) (18 250 CHF)\r\n* [QuarksLab](https://quarkslab.com/en/) (52 800 USD)\r\n\r\nThe first audit was generously funded by [Arweave](https://www.arweave.org/), one of the early adopters of RandomX. The remaining three audits were funded by donations from the [Monero community](https://ccs.getmonero.org/proposals/RandomX-audit.html). All four audits were coordinated by [OSTIF](https://ostif.org/).\r\n\r\nFinal reports from all four audits are available in the [audits](https://github.com/tevador/RandomX/blob/master/audits) directory. None of the audits found any critical vulnerabilities, but several changes in the algorithm and the code were made as a direct result of the audits. More details can be found in the [final report by OSTIF](https://ostif.org/four-audits-of-randomx-for-monero-and-arweave-have-been-completed-results/).\r\n\r\n## Build\r\n\r\nRandomX is written in C++11 and builds a static library with a C API provided by header file [randomx.h](https://github.com/tevador/RandomX/blob/master/src/randomx.h). Minimal API usage example is provided in [api-example1.c](https://github.com/tevador/RandomX/blob/master/src/tests/api-example1.c). The reference code includes a `randomx-benchmark` and `randomx-tests` executables for testing.\r\n\r\n### Linux\r\n\r\nBuild dependencies: `cmake` (minimum 2.8.7) and `gcc` (minimum version 4.8, but version 7+ is recommended).\r\n\r\nTo build optimized binaries for your machine, run:\r\n```\r\ngit clone https://github.com/tevador/RandomX.git\r\ncd RandomX\r\nmkdir build && cd build\r\ncmake -DARCH=native ..\r\nmake\r\n```\r\n\r\nTo build portable binaries, omit the `ARCH` option when executing cmake.\r\n\r\n### Windows\r\n\r\nOn Windows, it is possible to build using MinGW (same procedure as on Linux) or using Visual Studio (solution file is provided).\r\n\r\n### Precompiled binaries\r\n\r\nPrecompiled `randomx-benchmark` binaries are available on the [Releases page](https://github.com/tevador/RandomX/releases).\r\n\r\n## Proof of work\r\n\r\nRandomX was primarily designed as a PoW algorithm for [Monero](https://www.getmonero.org/). The recommended usage is following:\r\n\r\n* The key `K` is selected to be the hash of a block in the blockchain - this block is called the 'key block'. For optimal mining and verification performance, the key should change every 2048 blocks (~2.8 days) and there should be a delay of 64 blocks (~2 hours) between the key block and the change of the key `K`. This can be achieved by changing the key when `blockHeight % 2048 == 64` and selecting key block such that `keyBlockHeight % 2048 == 0`.\r\n* The input `H` is the standard hashing blob with a selected nonce value.\r\n\r\nRandomX was successfully activated on the Monero network on the 30th November 2019.\r\n\r\nIf you wish to use RandomX as a PoW algorithm for your cryptocurrency, please follow the [configuration guidelines](https://github.com/tevador/RandomX/blob/master/doc/configuration.md).\r\n\r\n**Note**: To achieve ASIC resistance, the key `K` must change and must not be miner-selectable. We recommend to use blockchain data as the key in a similar way to the Monero example above. If blockchain data cannot be used for some reason, use a predefined sequence of keys.\r\n\r\n### CPU performance\r\nThe table below lists the performance of selected CPUs using the optimal number of threads (T) and large pages (if possible), in hashes per second (H/s). \"CNv4\" refers to the CryptoNight variant 4 (CN/R) hashrate measured using [XMRig](https://github.com/xmrig/xmrig) v2.14.1. \"Fast mode\" and \"Light mode\" are the two modes of RandomX.\r\n\r\n|CPU|RAM|OS|AES|CNv4|Fast mode|Light mode|\r\n|---|---|--|---|-----|------|--------------|\r\nIntel Core i9-9900K|32G DDR4-3200|Windows 10|hw|660 (8T)|5770 (8T)|1160 (16T)|\r\nAMD Ryzen 7 1700|16G DDR4-2666|Ubuntu 16.04|hw|520 (8T)|4100 (8T)|620 (16T)|\r\nIntel Core i7-8550U|16G DDR4-2400|Windows 10|hw|200 (4T)|1700  (4T)|350 (8T)|\r\nIntel Core i3-3220|4G DDR3-1333|Ubuntu 16.04|soft|42 (4T)|510 (4T)|150 (4T)|\r\nRaspberry Pi 3|1G LPDDR2|Ubuntu 16.04|soft|3.5 (4T)|-|20 (4T)|\r\n\r\nNote that RandomX currently includes a JIT compiler for x86-64 and ARM64. Other architectures have to use the portable interpreter, which is much slower.\r\n\r\n### GPU performance\r\n\r\nSChernykh is developing GPU mining code for RandomX. Benchmarks are included in the following repositories:\r\n\r\n* [CUDA miner](https://github.com/SChernykh/RandomX_CUDA) - NVIDIA GPUs.\r\n* [OpenCL miner](https://github.com/SChernykh/RandomX_OpenCL) - only for AMD Vega and AMD Polaris GPUs (uses GCN machine code).\r\n\r\nThe code from the above repositories is included in the open source miner [XMRig](https://github.com/xmrig/xmrig).\r\n\r\nNote that GPUs are at a disadvantage when running RandomX since the algorithm was designed to be efficient on CPUs.\r\n\r\n# FAQ\r\n\r\n### Which CPU is best for mining RandomX?\r\n\r\nMost Intel and AMD CPUs made since 2011 should be fairly efficient at RandomX. More specifically, efficient mining requires:\r\n\r\n* 64-bit architecture\r\n* IEEE 754 compliant floating point unit\r\n* Hardware AES support ([AES-NI](https://en.wikipedia.org/wiki/AES_instruction_set) extension for x86, Cryptography extensions for ARMv8)\r\n* 16 KiB of L1 cache, 256 KiB of L2 cache and 2 MiB of L3 cache per mining thread\r\n* Support for large memory pages\r\n* At least 2.5 GiB of free RAM per NUMA node\r\n* Multiple memory channels may be required:\r\n    * DDR3 memory is limited to about 1500-2000 H/s per channel (depending on frequency and timings)\r\n    * DDR4 memory is limited to about 4000-6000 H/s per channel  (depending on frequency and timings)\r\n\r\n### Does RandomX facilitate botnets/malware mining or web mining?\r\n\r\nDue to the way the algorithm works, mining malware is much easier to detect. [RandomX Sniffer](https://github.com/tevador/randomx-sniffer) is a proof of concept tool that can detect illicit mining activity on Windows.\r\n\r\nEfficient mining requires more than 2 GiB of memory, which also disqualifies many low-end machines such as IoT devices, which are often parts of large botnets.\r\n\r\nWeb mining is infeasible due to the large memory requirement and the lack of directed rounding support for floating point operations in both Javascript and WebAssembly.\r\n\r\n### Since RandomX uses floating point math, does it give reproducible results on different platforms?\r\n\r\nRandomX uses only operations that are guaranteed to give correctly rounded results by the [IEEE 754](https://en.wikipedia.org/wiki/IEEE_754) standard: addition, subtraction, multiplication, division and square root. Special care is taken to avoid corner cases such as NaN values or denormals.\r\n\r\nThe reference implementation has been validated on the following platforms:\r\n* x86 (32-bit, little-endian)\r\n* x86-64 (64-bit, little-endian)\r\n* ARMv7+VFPv3 (32-bit, little-endian)\r\n* ARMv8 (64-bit, little-endian)\r\n* PPC64 (64-bit, big-endian)\r\n\r\n### Can FPGAs mine RandomX?\r\n\r\nRandomX generates multiple unique programs for every hash, so FPGAs cannot dynamically reconfigure their circuitry because typical FPGA takes tens of seconds to load a bitstream. It is also not possible to generate bitstreams for RandomX programs in advance due to the sheer number of combinations (there are 2<sup>512</sup> unique programs).\r\n\r\nSufficiently large FPGAs can mine RandomX in a [soft microprocessor](https://en.wikipedia.org/wiki/Soft_microprocessor) configuration by emulating a CPU. Under these circumstances, an FPGA will be much less efficient than a CPU or a specialized chip (ASIC).\r\n\r\n## Acknowledgements\r\n* [tevador](https://github.com/tevador) - author\r\n* [SChernykh](https://github.com/SChernykh) - contributed significantly to the design of RandomX\r\n* [hyc](https://github.com/hyc) - original idea of using random code execution for PoW\r\n* [Other contributors](https://github.com/tevador/RandomX/graphs/contributors)\r\n\r\nRandomX uses some source code from the following 3rd party repositories:\r\n* Argon2d, Blake2b hashing functions: https://github.com/P-H-C/phc-winner-argon2\r\n\r\nThe author of RandomX declares no competing financial interest.\r\n\r\n## Donations\r\n\r\nIf you'd like to use RandomX, please consider donating to help cover the development cost of the algorithm.\r\n\r\nAuthor's XMR address:\r\n```\r\n845xHUh5GvfHwc2R8DVJCE7BT2sd4YEcmjG8GNSdmeNsP5DTEjXd1CNgxTcjHjiFuthRHAoVEJjM7GyKzQKLJtbd56xbh7V\r\n```\r\nTotal donations received: ~3.86 XMR (as of 30th August 2019). Thanks to all contributors.\r\n",
      "performed_via_github_app": null
    },
    "performed_via_github_app": null
  }