From a0979d9a09421ef67871a55efd1522f63b0a0535 Mon Sep 17 00:00:00 2001
From: meows <b5c6@protonmail.com>
Date: Wed, 26 Feb 2020 14:44:38 -0500
Subject: [PATCH 1/6] fix(Gemfile.lock): bundle update

Should resolve reported vulnerability with nokogiri < 1.10.8

Signed-off-by: meows <b5c6@protonmail.com>
---
 Gemfile.lock | 82 +++++++++++++++++++++++++++-------------------------
 1 file changed, 42 insertions(+), 40 deletions(-)

diff --git a/Gemfile.lock b/Gemfile.lock
index 771375d6..ad75e4de 100644
--- a/Gemfile.lock
+++ b/Gemfile.lock
@@ -9,30 +9,29 @@ GEM
       minitest (~> 5.1)
       thread_safe (~> 0.3, >= 0.3.4)
       tzinfo (~> 1.1)
-    addressable (2.5.2)
-      public_suffix (>= 2.0.2, < 4.0)
-    builder (3.2.3)
+    addressable (2.7.0)
+      public_suffix (>= 2.0.2, < 5.0)
+    builder (3.2.4)
     coffee-script (2.4.1)
       coffee-script-source
       execjs
     coffee-script-source (1.11.1)
     colorator (1.1.0)
-    colorize (0.8.1)
-    commonmarker (0.17.9)
+    commonmarker (0.17.13)
       ruby-enum (~> 0.5)
-    concurrent-ruby (1.0.5)
-    eip_validator (0.8.0)
+    concurrent-ruby (1.1.6)
+    eip_validator (0.8.2)
       activemodel
       front_matter_parser (~> 0.1.1)
-    ethon (0.11.0)
+    ethon (0.12.0)
       ffi (>= 1.3.0)
     execjs (2.7.0)
-    faraday (0.14.0)
+    faraday (1.0.0)
       multipart-post (>= 1.2, < 3)
-    ffi (1.11.1)
+    ffi (1.12.2)
     forwardable-extended (2.6.0)
     front_matter_parser (0.1.1)
-    gemoji (3.0.0)
+    gemoji (3.0.1)
     github-pages (179)
       activesupport (= 4.2.9)
       github-pages-health-check (= 1.4.0)
@@ -84,16 +83,15 @@ GEM
       octokit (~> 4.0)
       public_suffix (~> 2.0)
       typhoeus (~> 1.3)
-    html-pipeline (2.7.1)
+    html-pipeline (2.12.3)
       activesupport (>= 2)
       nokogiri (>= 1.4)
-    html-proofer (3.8.0)
-      activesupport (>= 4.2, < 6.0)
+    html-proofer (3.15.1)
       addressable (~> 2.3)
-      colorize (~> 0.8)
-      mercenary (~> 0.3.2)
-      nokogiri (~> 1.8.1)
+      mercenary (~> 0.3)
+      nokogumbo (~> 2.0)
       parallel (~> 1.3)
+      rainbow (~> 3.0)
       typhoeus (~> 1.3)
       yell (~> 2.0)
     i18n (0.9.5)
@@ -114,7 +112,7 @@ GEM
     jekyll-coffeescript (1.1.1)
       coffee-script (~> 2.2)
       coffee-script-source (~> 1.11.1)
-    jekyll-commonmark (1.1.0)
+    jekyll-commonmark (1.2.0)
       commonmarker (~> 0.14)
       jekyll (>= 3.0, < 4.0)
     jekyll-commonmark-ghpages (0.1.5)
@@ -210,48 +208,52 @@ GEM
       rb-inotify (~> 0.9, >= 0.9.7)
       ruby_dep (~> 1.2)
     mercenary (0.3.6)
-    mini_portile2 (2.3.0)
+    mini_portile2 (2.4.0)
     minima (2.4.0)
       jekyll (~> 3.5)
       jekyll-feed (~> 0.9)
       jekyll-seo-tag (~> 2.1)
-    minitest (5.11.3)
-    multipart-post (2.0.0)
-    net-dns (0.8.0)
-    nokogiri (1.8.5)
-      mini_portile2 (~> 2.3.0)
-    octokit (4.8.0)
+    minitest (5.14.0)
+    multipart-post (2.1.1)
+    net-dns (0.9.0)
+    nokogiri (1.10.8)
+      mini_portile2 (~> 2.4.0)
+    nokogumbo (2.0.2)
+      nokogiri (~> 1.8, >= 1.8.4)
+    octokit (4.16.0)
+      faraday (>= 0.9)
       sawyer (~> 0.8.0, >= 0.5.3)
-    parallel (1.12.1)
-    pathutil (0.16.1)
+    parallel (1.19.1)
+    pathutil (0.16.2)
       forwardable-extended (~> 2.6)
     public_suffix (2.0.5)
+    rainbow (3.0.0)
     rb-fsevent (0.10.3)
-    rb-inotify (0.9.10)
-      ffi (>= 0.5.0, < 2)
+    rb-inotify (0.10.1)
+      ffi (~> 1.0)
     rouge (2.2.1)
     ruby-enum (0.7.2)
       i18n
     ruby_dep (1.5.0)
-    rubyzip (2.0.0)
-    safe_yaml (1.0.4)
-    sass (3.5.5)
+    rubyzip (2.2.0)
+    safe_yaml (1.0.5)
+    sass (3.7.4)
       sass-listen (~> 4.0.0)
     sass-listen (4.0.0)
       rb-fsevent (~> 0.9, >= 0.9.4)
       rb-inotify (~> 0.9, >= 0.9.7)
-    sawyer (0.8.1)
-      addressable (>= 2.3.5, < 2.6)
-      faraday (~> 0.8, < 1.0)
+    sawyer (0.8.2)
+      addressable (>= 2.3.5)
+      faraday (> 0.8, < 2.0)
     terminal-table (1.8.0)
       unicode-display_width (~> 1.1, >= 1.1.1)
     thread_safe (0.3.6)
-    typhoeus (1.3.0)
+    typhoeus (1.3.1)
       ethon (>= 0.9.0)
-    tzinfo (1.2.5)
+    tzinfo (1.2.6)
       thread_safe (~> 0.1)
-    unicode-display_width (1.3.0)
-    yell (2.0.7)
+    unicode-display_width (1.6.1)
+    yell (2.2.2)
 
 PLATFORMS
   ruby
@@ -266,4 +268,4 @@ DEPENDENCIES
   tzinfo-data
 
 BUNDLED WITH
-   1.16.1
+   2.1.2

From c38488a190ade0dbb887b902cf178c0ba6b69d33 Mon Sep 17 00:00:00 2001
From: meows <b5c6@protonmail.com>
Date: Wed, 26 Feb 2020 14:49:07 -0500
Subject: [PATCH 2/6] Gemfile: nokogiri >= 1.10.8

This was suggested to me by Github.

Signed-off-by: meows <b5c6@protonmail.com>
---
 Gemfile      | 1 +
 Gemfile.lock | 1 +
 2 files changed, 2 insertions(+)

diff --git a/Gemfile b/Gemfile
index c8f707f6..337377ac 100644
--- a/Gemfile
+++ b/Gemfile
@@ -9,6 +9,7 @@ source "https://rubygems.org"
 # This will help ensure the proper Jekyll version is running.
 # Happy Jekylling!
 gem "jekyll", "~> 3.6.2"
+gem "nokogiri", ">= 1.10.8"
 
 # This is the default theme for new Jekyll sites. You may change this to anything you like.
 gem "minima", "~> 2.0"
diff --git a/Gemfile.lock b/Gemfile.lock
index ad75e4de..dfe3e66b 100644
--- a/Gemfile.lock
+++ b/Gemfile.lock
@@ -265,6 +265,7 @@ DEPENDENCIES
   jekyll (~> 3.6.2)
   jekyll-feed (~> 0.6)
   minima (~> 2.0)
+  nokogiri (>= 1.10.8)
   tzinfo-data
 
 BUNDLED WITH

From 64146c0b670bf6ff3af5436ad2cc77be345c8f85 Mon Sep 17 00:00:00 2001
From: meows <b5c6@protonmail.com>
Date: Thu, 27 Feb 2020 08:52:22 -0500
Subject: [PATCH 3/6] use ecip_validator fork

Signed-off-by: meows <b5c6@protonmail.com>
---
 Gemfile      |  2 +-
 Gemfile.lock | 13 +++++++++----
 2 files changed, 10 insertions(+), 5 deletions(-)

diff --git a/Gemfile b/Gemfile
index 337377ac..0213d744 100644
--- a/Gemfile
+++ b/Gemfile
@@ -32,4 +32,4 @@ gem "wdm", "~> 0.1.0" if Gem.win_platform?
 
 gem "html-proofer", '>=3.3.1'
 
-gem "eip_validator", ">=0.8.0"
+gem "ecip_validator", :git => 'https://github.com/meowsbits/ecip_validator'
diff --git a/Gemfile.lock b/Gemfile.lock
index dfe3e66b..ca3571b0 100644
--- a/Gemfile.lock
+++ b/Gemfile.lock
@@ -1,3 +1,11 @@
+GIT
+  remote: https://github.com/meowsbits/ecip_validator
+  revision: 29f45d2fb81d37676729be3e1899633849b006c1
+  specs:
+    ecip_validator (0.8.2)
+      activemodel
+      front_matter_parser (~> 0.1.1)
+
 GEM
   remote: https://rubygems.org/
   specs:
@@ -20,9 +28,6 @@ GEM
     commonmarker (0.17.13)
       ruby-enum (~> 0.5)
     concurrent-ruby (1.1.6)
-    eip_validator (0.8.2)
-      activemodel
-      front_matter_parser (~> 0.1.1)
     ethon (0.12.0)
       ffi (>= 1.3.0)
     execjs (2.7.0)
@@ -259,7 +264,7 @@ PLATFORMS
   ruby
 
 DEPENDENCIES
-  eip_validator (>= 0.8.0)
+  ecip_validator!
   github-pages
   html-proofer (>= 3.3.1)
   jekyll (~> 3.6.2)

From b6ecacdbb44cae0b5772698d3258f0cfa836ef04 Mon Sep 17 00:00:00 2001
From: meows <b5c6@protonmail.com>
Date: Thu, 27 Feb 2020 09:01:34 -0500
Subject: [PATCH 4/6] github actions workflows

Signed-off-by: meows <b5c6@protonmail.com>
---
 .github/workflows/ecip_validation.yml | 13 +++++++++++++
 .github/workflows/jekyll.yml          |  2 +-
 2 files changed, 14 insertions(+), 1 deletion(-)
 create mode 100644 .github/workflows/ecip_validation.yml

diff --git a/.github/workflows/ecip_validation.yml b/.github/workflows/ecip_validation.yml
new file mode 100644
index 00000000..f0c59eee
--- /dev/null
+++ b/.github/workflows/ecip_validation.yml
@@ -0,0 +1,13 @@
+name: ECIP Validation Workflow
+
+on: [pull_request, push]
+
+jobs:
+  build:
+    runs-on: ubuntu-latest
+    steps:
+    - uses: actions/checkout@v1
+    - name: Validate the ECIP spec files
+    - run: bundle install
+    - run: bundle exec ecip_validator _specs/*
+
diff --git a/.github/workflows/jekyll.yml b/.github/workflows/jekyll.yml
index 57c97e9c..5cd231e0 100644
--- a/.github/workflows/jekyll.yml
+++ b/.github/workflows/jekyll.yml
@@ -1,4 +1,4 @@
-name: Ethereum Classic Improvement Proposals CI
+name: Jekyll Workflow
 
 on: [push]
 

From 402964144ca3410480b21c3d10cb0717095e4406 Mon Sep 17 00:00:00 2001
From: meows <b5c6@protonmail.com>
Date: Thu, 27 Feb 2020 09:04:14 -0500
Subject: [PATCH 5/6] every step must define a `uses` or `run` key

Signed-off-by: meows <b5c6@protonmail.com>
---
 .github/workflows/ecip_validation.yml | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

diff --git a/.github/workflows/ecip_validation.yml b/.github/workflows/ecip_validation.yml
index f0c59eee..dfaeebab 100644
--- a/.github/workflows/ecip_validation.yml
+++ b/.github/workflows/ecip_validation.yml
@@ -6,8 +6,6 @@ jobs:
   build:
     runs-on: ubuntu-latest
     steps:
-    - uses: actions/checkout@v1
+    - uses: actions/checkout@v2
     - name: Validate the ECIP spec files
-    - run: bundle install
-    - run: bundle exec ecip_validator _specs/*
-
+      run: bundle install && bundle exec ecip_validator _specs/*

From fbc7c2f07d27b909ec715104fc1e20913e960fe2 Mon Sep 17 00:00:00 2001
From: meows <b5c6@protonmail.com>
Date: Thu, 27 Feb 2020 09:10:05 -0500
Subject: [PATCH 6/6] fix ruby setup steps

Signed-off-by: meows <b5c6@protonmail.com>
---
 .github/workflows/ecip_validation.yml | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

diff --git a/.github/workflows/ecip_validation.yml b/.github/workflows/ecip_validation.yml
index dfaeebab..b83318dd 100644
--- a/.github/workflows/ecip_validation.yml
+++ b/.github/workflows/ecip_validation.yml
@@ -7,5 +7,12 @@ jobs:
     runs-on: ubuntu-latest
     steps:
     - uses: actions/checkout@v2
+    - name: Set up Ruby 2.6
+      uses: actions/setup-ruby@v1
+      with:
+        version: 2.6.x
     - name: Validate the ECIP spec files
-      run: bundle install && bundle exec ecip_validator _specs/*
+      run: |
+        gem install bundler
+        bundle install --jobs 4 --retry 3
+        bundle exec ecip_validator _specs/*
